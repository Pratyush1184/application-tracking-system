(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{24:function(t,e,a){},26:function(t,e,a){},35:function(t,e,a){},40:function(t,e,a){"use strict";a.r(e);var s=a(0),i=a.n(s),c=a(13),n=a.n(c),o=(a(24),a(6)),l=a(7),r=a(12),d=a(9),h=a(8),p=(a(25),a(26),a(10)),u=a.n(p),j=(a(27),a(31),a(32),a(33),a(34),a(35),a(1)),b=function(t){Object(d.a)(a,t);var e=Object(h.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"logout",value:function(){var t=this,e=localStorage.getItem("auth-token");e?u.a.ajax({url:"http://localhost:5000/logout",method:"POST",contentType:"application/json",headers:{"x-access-token":e},success:function(e){localStorage.removeItem("auth-token"),console.log("Logout successful"),t.props.switchPage("LoginPage")},error:function(t){console.log(JSON.stringify(t))}}):this.props.switchPage("LoginPage")}},{key:"render",value:function(){var t=this;return Object(j.jsx)("div",{className:"left-nav",children:Object(j.jsxs)("div",{className:"left-nav-item",children:[Object(j.jsxs)("div",{className:"left-nav-text-wrapper",children:[Object(j.jsx)("div",{onClick:function(){return t.props.switchPage("ApplicationPage")},children:Object(j.jsx)("i",{className:"fas fa-columns left-nav-icon"})}),"Apps"]}),Object(j.jsxs)("div",{className:"left-nav-text-wrapper",children:[Object(j.jsx)("div",{onClick:function(){return t.props.switchPage("SearchPage")},children:Object(j.jsx)("i",{className:"fas fa-search left-nav-icon"})}),"Search"]}),Object(j.jsxs)("div",{className:"left-nav-text-wrapper",children:[Object(j.jsx)("div",{onClick:function(){return t.props.switchPage("LoginPage")},children:Object(j.jsx)("i",{className:"fas fa-sign-in-alt left-nav-icon"})}),"Log In"]}),Object(j.jsxs)("div",{className:"left-nav-text-wrapper",children:[Object(j.jsx)("div",{onClick:this.logout.bind(this),children:Object(j.jsx)("i",{className:"fas fa-sign-out-alt left-nav-icon"})}),"Log Out"]})]})})}}]),a}(s.Component),m=[{class:"1",state:"Wish list",wordOfDate:"Apply By"},{class:"2",state:"Waiting for referral",wordOfDate:"Referral before "},{class:"3",state:"Applied",wordOfDate:"Applied Date"},{class:"4",state:"Rejected",wordOfDate:"Applied Date"}],O=function(t){Object(d.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(o.a)(this,a),(s=e.call(this,t)).state={showEditModal:t.showEditModal},s}return Object(l.a)(a,[{key:"stopPropagation",value:function(t){t.stopPropagation()}},{key:"render",value:function(){var t=this,e=m.find((function(e){return e.class===t.props.application.status}));return Object(j.jsx)("div",{className:"card card-col",onClick:this.state.showEditModal,children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("div",{className:"card-action",children:Object(j.jsx)("h6",{className:"card-title",onClick:this.stopPropagation,children:this.props.application.jobTitle})}),Object(j.jsxs)("p",{className:"small-content-text",children:[this.props.application.companyName,Object(j.jsx)("br",{}),e.wordOfDate,": ",this.props.application.date]},this.props.application.companyName)]})},this.state.id+"_card")}}]),a}(s.Component),f=a(14),v=a(43),g=function(t){Object(d.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(o.a)(this,a),(s=e.call(this,t)).state={closeEditModal:t.closeEditModal,deleteApplication:t.deleteApplication,submitFunc:t.submitFunc,id:t.application.id,jobTitle:t.application.jobTitle,companyName:t.application.companyName,date:t.application.date,class:t.application.status},s}return Object(l.a)(a,[{key:"handleChange",value:function(t){this.setState(Object(f.a)({},t.target.id,t.target.value))}},{key:"submitAction",value:function(){this.state.closeEditModal();var t={id:this.state.id,companyName:this.state.companyName,jobTitle:this.state.jobTitle,date:this.state.date,status:this.state.class};this.state.submitFunc(t)}},{key:"deleteAction",value:function(){this.state.closeEditModal();var t={id:this.state.id,companyName:this.state.companyName,jobTitle:this.state.jobTitle,date:this.state.date,status:this.state.class};this.state.deleteApplication(t)}},{key:"render",value:function(){var t=null;return t="update"===this.props.mode?Object(j.jsx)("button",{type:"button",className:"btn btn-success",onClick:this.submitAction.bind(this),children:"Update"}):Object(j.jsx)("button",{type:"button",className:"btn btn-success",onClick:this.submitAction.bind(this),children:"Create"}),this.props.application?Object(j.jsx)("div",{children:Object(j.jsxs)(v.a,{show:this.props.show,onHide:this.state.closeEditModal,children:[Object(j.jsx)(v.a.Header,{closeButton:!0,children:Object(j.jsx)(v.a.Title,{children:this.props.application.companyName})}),Object(j.jsxs)(v.a.Body,{children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"companyName",className:"col-form-label",children:"Company Name"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"companyName",value:this.state.companyName,onChange:this.handleChange.bind(this)})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"job_title",className:"col-form-label",children:"Job Title"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"jobTitle",value:this.state.jobTitle,onChange:this.handleChange.bind(this)})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"date",className:"col-form-label",children:"Date"}),Object(j.jsx)("input",{type:"date",className:"form-control",id:"date",value:this.state.date,onChange:this.handleChange.bind(this)})]}),Object(j.jsxs)("div",{className:"input-group mb-3",children:[Object(j.jsx)("div",{className:"input-group-prepend",children:Object(j.jsx)("label",{className:"input-group-text",htmlFor:"class",children:"Application Type"})}),Object(j.jsxs)("select",{className:"custom-select",id:"class",value:this.state.class,onChange:this.handleChange.bind(this),children:[Object(j.jsx)("option",{children:"Choose..."}),Object(j.jsx)("option",{value:"1",children:"Wish list"}),Object(j.jsx)("option",{value:"2",children:"Waiting Referral"}),Object(j.jsx)("option",{value:"3",children:"Applied"}),Object(j.jsx)("option",{value:"4",children:"Rejected"})]})]})]}),Object(j.jsxs)(v.a.Footer,{children:[Object(j.jsx)("button",{type:"button",className:"btn btn-danger mr-auto",onClick:this.deleteAction.bind(this),children:"Delete"}),Object(j.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:this.state.closeEditModal,children:"Close"}),t]})]})}):Object(j.jsx)("div",{})}}]),a}(s.Component),x=function(t){Object(d.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(o.a)(this,a),(s=e.call(this,t)).state={applications:[],card_titles:[],card_class:[],showModal:!1},s.getData=s.getData.bind(Object(r.a)(s)),s.groupApplication=s.groupApplication.bind(Object(r.a)(s)),s.createCardTitle=s.createCardTitle.bind(Object(r.a)(s)),s.createCardClass=s.createCardClass.bind(Object(r.a)(s)),s}return Object(l.a)(a,[{key:"getData",value:function(){var t=this,e=localStorage.getItem("auth-token");if(e)return u.a.ajax({url:"http://localhost:5000/application",method:"GET",headers:{"x-access-token":e},error:function(e){console.log(JSON.stringify(e)),t.props.switchPage("LoginPage")}})}},{key:"componentDidMount",value:function(){var t=this;localStorage.getItem("auth-token")&&this.getData().done((function(e){e=JSON.parse(e);var a=t.groupApplication(e),s=t.createCardTitle(a),i=t.createCardClass(a);t.setState({applications:e,card_titles:s,card_class:i})})).catch((function(t){console.log(t)}))}},{key:"updateCardBoard",value:function(t){var e=this,a=this.state.applications,s=localStorage.getItem("auth-token");if(s){null==t.id?u.a.ajax({url:"http://localhost:5000/application",method:"POST",async:!1,headers:{"x-access-token":s},data:JSON.stringify({application:t}),contentType:"application/json",success:function(t){console.log("Success")},error:function(t){console.log(JSON.stringify(t))},complete:function(t){e.componentDidMount()}}):u.a.ajax({url:"http://localhost:5000/application",method:"PUT",headers:{"x-access-token":s},async:!1,data:JSON.stringify({application:t}),contentType:"application/json",success:function(t){console.log("Success")},complete:function(t){e.componentDidMount()}});var i=this.groupApplication(a),c=this.createCardTitle(i),n=this.createCardClass(i);this.setState({applications:a,card_titles:c,card_class:n,showModal:!1,application:null})}else this.props.switchPage("LoginPage")}},{key:"deleteApplication",value:function(t){var e=this,a=this.state.applications,s=localStorage.getItem("auth-token");if(s){u.a.ajax({url:"http://localhost:5000/application",method:"DELETE",headers:{"x-access-token":s},async:!1,data:JSON.stringify({application:t}),contentType:"application/json",success:function(t){console.log("Success")},error:function(t){console.log(JSON.stringify(t))},complete:function(t){e.componentDidMount()}});var i=this.groupApplication(a),c=this.createCardTitle(i),n=this.createCardClass(i);this.setState({applications:a,card_titles:c,card_class:n,showModal:!1,application:null})}else this.props.switchPage("LoginPage")}},{key:"showEditModal",value:function(t,e){var a=e;this.setState({showModal:!0,application:t,modalMode:a})}},{key:"closeEditModal",value:function(){this.setState({showModal:!1,application:null})}},{key:"createCardClass",value:function(t){var e=this;return t.reduce((function(t,a){var s=Object(j.jsxs)("div",{className:"col",id:a.title+"_class",children:[a.applications.reduce((function(t,a){var s=Object(j.jsx)(O,{application:a,showEditModal:e.showEditModal.bind(e,a,"update")},a.id);return t.push(s),t}),[]),Object(j.jsx)("div",{className:"card card-col",children:Object(j.jsx)("div",{className:"card-body new-col",onClick:e.showEditModal.bind(e,{class:a.class},"create"),children:Object(j.jsx)("i",{className:"fas fa-plus text-center"})})})]},a.title+"_class");return t.push(s),t}),[])}},{key:"createCardTitle",value:function(t){return t.reduce((function(t,e){var a=Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("div",{className:"card card-col",children:Object(j.jsx)("div",{className:"card-body noPadding",children:Object(j.jsx)("div",{type:"text",className:"text-center title-col form-control-lg",children:e.title})})})},e.title+"_title");return t.push(a),t}),[])}},{key:"groupApplication",value:function(t){var e=[{title:"Wish list",applications:[],class:"1"},{title:"Waiting for referral",applications:[],class:"2"},{title:"Applied",applications:[],class:"3"},{title:"Rejected",applications:[],class:"4"}];return null===t||void 0===t||t.forEach((function(t){var a=e.find((function(e){return e.class===t.status}));null===a||void 0===a||a.applications.push(t)})),e}},{key:"render",value:function(){var t=null;return this.state.application&&(t=Object(j.jsx)(g,{show:this.state.showModal,submitFunc:this.updateCardBoard.bind(this),mode:this.state.modalMode,application:this.state.application,closeEditModal:this.closeEditModal.bind(this),deleteApplication:this.deleteApplication.bind(this)})),Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{className:"text-center",children:"Dashboard"}),Object(j.jsxs)("span",{id:"tab",children:[Object(j.jsx)("div",{className:"row",children:this.state.card_titles}),Object(j.jsx)("div",{className:"row",children:this.state.card_class}),t]})]})}}]),a}(s.Component),y=[{label:"Company Name",id:"companyName"},{label:"Job title",id:"jobTitle"},{label:"Date",id:"date"},{label:"",id:"func"}],N=function(t){Object(d.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(o.a)(this,a),(s=e.call(this,t)).state={searchText:"",rows:[],addedList:[]},s}return Object(l.a)(a,[{key:"search",value:function(){var t=this;this.state.searchText?u.a.ajax({url:"http://localhost:5000/search",method:"get",data:{keywords:this.state.searchText},contentType:"application/json",success:function(e){var a=e.map((function(t,e){return{id:e,jobTitle:t.jobTitle,companyName:t.companyName,location:t.location}}));t.setState({rows:a})}}):alert("Search bar cannot be empty!!")}},{key:"deleteTheApplication",value:function(t){var e=this.state.rows.filter((function(e){return e.id!==t})),a=this.state.addedList.filter((function(e){return e.id!==t}));this.setState({rows:e,addedList:a})}},{key:"addToWaitlist",value:function(t){var e=this.state.addedList;e.push(t.id),console.log(t);var a={jobTitle:t.jobTitle,companyName:t.companyName,date:(new Date).toJSON().slice(0,10).replace(/-/g,"-"),status:"1"};console.log(a),u.a.ajax({url:"http://localhost:5000/application",method:"POST",data:JSON.stringify({application:a}),contentType:"application/json",success:function(t){console.log(t)}}),this.setState({addedList:e})}},{key:"removeFromWaitlist",value:function(t){var e=this.state.addedList.filter((function(e){return e!==t.id}));this.setState({addedList:e})}},{key:"handleChange",value:function(t){this.setState(Object(f.a)({},t.target.id,t.target.value))}},{key:"render",value:function(){var t=this,e=this.state.rows;return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{className:"text-center",children:"Company Search"}),Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-6 input-group mb-3",children:Object(j.jsx)("input",{type:"text",id:"searchText",className:"form-control",placeholder:"Keyword","aria-label":"Username","aria-describedby":"basic-addon1",value:this.state.searchText,onChange:this.handleChange.bind(this)})}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:this.search.bind(this),children:"Search"})})]})}),Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsx)("tr",{children:y.map((function(t){return Object(j.jsx)("th",{children:t.label},t.id+"_th")}))})}),Object(j.jsx)("tbody",{children:e.map((function(e){return Object(j.jsx)("tr",{children:y.map((function(a){var s=e[a.id];if("func"!==a.id)return Object(j.jsx)("td",{children:s},a.id);var i=t.state.addedList.includes(e.id)?Object(j.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:t.removeFromWaitlist.bind(t,e),children:" Added "}):Object(j.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:t.addToWaitlist.bind(t,e),children:" Add "});return Object(j.jsx)("td",{children:Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-md-4",children:i}),"\xa0\xa0",Object(j.jsx)("div",{className:"col-md-2",children:Object(j.jsx)("button",{type:"button",style:{backgroundColor:"red"},className:"btn btn-secondary",onClick:t.deleteTheApplication.bind(t,e.id),children:" Delete "})})]})})},e.id+"_func")}))},e.id)}))})]})]})}}]),a}(s.Component),C=function(t){Object(d.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(o.a)(this,a),(s=e.call(this,t)).state={username:"",password:""},s}return Object(l.a)(a,[{key:"login",value:function(){var t=this;this.state.username&&this.state.password?u.a.ajax({url:"http://localhost:5000/login",method:"POST",data:JSON.stringify({email:this.state.username,passwd:this.state.password}),contentType:"application/json",success:function(e){localStorage.setItem("auth-token",e["auth-token"]),t.props.switchPage("ApplicationPage")},error:function(t){console.log(JSON.stringify(t)),alert("Invalid username or password.")}}):alert("Please enter a username and password.")}},{key:"handleChange",value:function(t){this.setState(Object(f.a)({},t.target.id,t.target.value))}},{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{className:"text-center",children:"Login"}),Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("input",{type:"text",id:"username",className:"form-control m-1",placeholder:"Username","aria-label":"Username","aria-describedby":"basic-addon1",value:this.state.username,onChange:this.handleChange.bind(this)}),Object(j.jsx)("input",{type:"password",id:"password",className:"form-control m-1",placeholder:"Password","aria-label":"Password","aria-describedby":"basic-addon1",value:this.state.password,onChange:this.handleChange.bind(this)}),Object(j.jsx)("button",{type:"button",className:"btn btn-secondary w-100 m-1",onClick:this.login.bind(this),children:"Login"})]})]})}}]),a}(s.Component),w=function(t){Object(d.a)(a,t);var e=Object(h.a)(a);function a(t){var s;Object(o.a)(this,a),s=e.call(this,t);var i={SearchPage:Object(j.jsx)(N,{}),ApplicationPage:Object(j.jsx)(x,{}),LoginPage:Object(j.jsx)(C,{switchPage:s.switchPage.bind(Object(r.a)(s))})};return s.state={currentPage:Object(j.jsx)(C,{switchPage:s.switchPage.bind(Object(r.a)(s))}),mapRouter:i},s}return Object(l.a)(a,[{key:"switchPage",value:function(t){this.setState({currentPage:this.state.mapRouter[t]})}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"main-page",children:[Object(j.jsx)(b,{switchPage:this.switchPage.bind(this)}),Object(j.jsx)("div",{className:"main",children:Object(j.jsxs)("div",{className:"content",children:[Object(j.jsx)("div",{className:""}),this.state.currentPage]})})]})}}]),a}(i.a.Component),k=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,44)).then((function(e){var a=e.getCLS,s=e.getFID,i=e.getFCP,c=e.getLCP,n=e.getTTFB;a(t),s(t),i(t),c(t),n(t)}))};n.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(w,{})}),document.getElementById("root")),k()}},[[40,1,2]]]);
//# sourceMappingURL=main.0e81a6d5.chunk.js.map